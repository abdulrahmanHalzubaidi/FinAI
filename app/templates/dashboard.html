{% extends "base.html" %}
{% block title %}Dashboard - FinAI{% endblock %}

{% block head_content %}
<style>
    .dashboard-card {
        transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    .dashboard-card:hover {
        transform: translateY(-10px);
        box-shadow: 0 10px 20px rgba(0,0,0,0.1);
    }
    .card-icon {
        font-size: 3rem;
        color: #007bff;
        margin-bottom: 15px;
    }
    
    .file-btn{
        border: none;
        color: white;
        border-radius: 50px;
        cursor: pointer;
        transition: 0.3s;
        padding: 8px 12px;
        display: flex;
        align-items: center;
        gap: 5px;
    }

    .file-btn {
        background-color: #007bff;
        margin-right: 10px;
    }

    .file-btn:hover{
        background-color: #0056b3;
    }

    .file-input {
        display: none;
    }
</style>
{% endblock %}

{% block content %}
<div class="container-fluid">
    <div class="row">
        <div class="col-12">
            <h1 class="display-4 mb-4">
                <i class="fas fa-user-circle me-2"></i>Welcome, {{ username }}!
            </h1>
        </div>
    </div>

    <div class="row row-cols-1 row-cols-md-3 g-4 mt-3">
        <!-- Financial Formula Calculator -->
        <div class="col">
            <div class="card h-100 dashboard-card">
                <div class="card-body text-center">
                    <i class="fas fa-calculator card-icon"></i>
                    <h5 class="card-title">FinAI Calculator</h5>
                    <p class="card-text text-muted">Calculate essential financial metrics like NPV, ROI, IRR, and more.</p>
                    <a href="{{ url_for('finai_calculator') }}" class="btn btn-primary mt-3">
                        <i class="fas fa-chevron-right me-2"></i>Open Calculator
                    </a>
                </div>
            </div>
        </div>

        <!-- File Upload & Analysis -->
        <div class="col">
            <div class="card h-100 dashboard-card">
                <div class="card-body text-center">
                    <i class="fas fa-chart-bar card-icon"></i>
                    <h5 class="card-title">FinAI Analyzer</h5>
                    <p class="card-text text-muted">Upload a CSV file for automatic data analysis and insights.</p>
                    <form action="{{ url_for('finai_analyzer') }}" method="POST" enctype="multipart/form-data" class="mt-3">
                        <div>
                            <p><label for="file" class="btn btn-primary">
                                <span id="fileName"><i class="fas fa-paperclip me-2"></i>Attach File</span>
                            </label>
                            <input type="file" id="file" name="file" class="file-input" onchange="updateFileName()" required></p>
                            <p><button type="submit" class="btn btn-primary">
                                <i class="fas fa-chart-line me-2"></i>Analyze Data
                            </button></p>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- Dataset Analyzer -->
        <div class="col">
            <div class="card h-100 dashboard-card">
                <div class="card-body text-center">
                    <i class="fas fa-robot card-icon"></i>
                    <h5 class="card-title">Ask FinAI</h5>
                    <p class="card-text text-muted">Ask questions to extract insights and patterns from your financial datasets.</p>
                    <a href="{{ url_for('ask_finai') }}" class="btn btn-primary mt-3">
                        <i class="fas fa-chevron-right me-2"></i>Start Asking
                    </a>
                </div>
            </div>
        </div>
    </div>
<script>
    function updateFileName() {
        const fileInput = document.getElementById("file");
        const fileName = document.getElementById("fileName");
        fileName.textContent = fileInput.files.length > 0 ? fileInput.files[0].name : "Attach File";
    }
</script>

</div>
{% endblock %}